{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VF Home</title>
    <link rel="stylesheet" href="{% static 'css/booking/hotelhome.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="{% static 'js/booking/hotelhome.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
    <div id="preloader">
        <div id="status"></div>
    </div>
    
 
    <!-- header ends -->
    <!-- SLIDER -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <span id="errorMessageContainer"></span>
                </div>
            </div>
        </div>
    </div>

    <section>
        <div class="container-fluid slider-sec">
            <div class="row">
                <div class="col-md-12">
                    <div class="slider-container">
                        <div class="slider">
                            <div class="slide"><img src="{% static 'image/booking/Background.jpg' %}" alt="Image 1" class="img-fluid"></div>
                            <div class="slide"><img src="{% static 'image/booking/Background 2.jpg' %}" alt="Image 2" class="img-fluid"></div>
                            <div class="slide"><img src="{% static 'image/booking/Background 3.jpg' %}" alt="Image 3" class="img-fluid"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

 

    <!-- SLIDER TEXT SECTION -->
    <section id="text-sec">
        <div id="title">
            <div class="d-flex flex-row titles">
                <p id="head-title">THIS WINTER HOLIDAY</p>&nbsp
                <p id="sub-title" style="font-weight: 200;"><i>HOT TRIPS</i></p>
            </div>
            <div>
                <p id="under-title">Enjoy Your Holiday With Us</p>
            </div>
        </div>
    </section>

    <!-- HOME INPUT SECTION -->
    <section id="home-sec">
        <div class="container-fluid">
            <div class="head">
                <p>Book Your Hotels</p>
            </div>
            <form id="input-sec" class="row"  method="get" action="{% url 'hotellist' %}" onsubmit="return validateForm()"  >
                {% csrf_token %}
                <fieldset class="scheduler-border col-md-3">
                    <legend class="scheduler-border">Where</legend>
                    <div class="control-group">
                        <div class="controls bootstrap-timepicker">
                            <input type="text"  class="des"  id="autocompleteInput" placeholder="Enter The Name, City, Landmark" style="font-size: 14px;" name="cityname" autofocus>
                            <input type="hidden" id="cityIdInput" name="city_id">
                            <input type="hidden" id="countryCodeInput" name="country_code">
                            <i class="icon-time"></i>
                            <script>
                                $(function () {
                                    $("#autocompleteInput").autocomplete({
                                        source: function (request, response) {
                                            $.ajax({
                                                url: "/search_destinations",
                                                dataType: "json",
                                                data: {
                                                    query: request.term
                                                },
                                                success: function (data) {
                                                    response(data.data);
                                                }
                                            });
                                        },
                                        minLength: 2,
                                        select: function (event, ui) {
                                            // Update the hidden input fields with selected values
                                            $("#cityIdInput").val(ui.item.cityID);
                                            $("#countryCodeInput").val(ui.item.countryCode);
                                        }
                                    });
                                });
                            </script>
                            <style>
                                #cityIdInput {
                                    color: blue;
                                }
                            </style>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="scheduler-border col-md-2">
                    <legend class="scheduler-border">Check-In</legend>
                    <div class="control-group">
                        <div class="controls bootstrap-timepicker">
                            <input type="text" class="check" data-date="" data-date-format="DD MMMM YYYY" style="font-size: 14px;" name="check-in" id="check-in" readonly>
                            <i class="icon-time"></i>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="scheduler-border col-md-2">
                    <legend class="scheduler-border">Check-Out</legend>
                    <div class="control-group">
                        <div class="controls bootstrap-timepicker">
                            <input type="text" class="check" data-date="" data-date-format="DD MMMM YYYY" style="font-size: 14px;" name="check-out" id="check-out" readonly>
                            <i class="icon-time"></i>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="scheduler-border col-md-2 mb-3">
                    <legend class="scheduler-border">Nationality</legend>
                    <div class="control-group">
                        <div class="controls bootstrap-timepicker" style="width: 100%;">
                            <select class="Nationality" name="nation" id="nation" style="font-size: 14px;width: 100%;border: none; outline: none;" value="Enter the nation">
                                <option value="IN" selected>India</option>
                                <option value="AF" >Afghanistan</option>
                                <option value="AL" >Albania</option>
                                <option value="DZ" >Algeria</option>
                                <option value="AS" >American Samoa</option>
                                <option value="AD" >Andorra</option>
                                <option value="AO" >Angola</option>
                                <option value="AI" >Anguilla</option>
                                <option value="AQ" >Antarctica</option>
                                <option value="AG" >Antigua &amp; Barbuda</option>
                                <option value="AR" >Argentina</option>
                                <option value="AM" >Armenia</option>
                                <option value="AW" >Aruba</option>
                                <option value="AU" >Australia</option>
                                <option value="AT" >Austria</option>
                                <option value="AZ" >Azerbaijan</option>
                                <option value="BS" >Bahamas</option>
                                <option value="BH" >Bahrain</option>
                                <option value="BD" >Bangladesh</option>
                                <option value="BB" >Barbados</option>
                                <option value="BY" >Belarus (Belorussia)</option>
                                <option value="BE" >Belgium</option>
                                <option value="BZ" >Belize</option>
                                <option value="BJ" >Benin</option>
                                <option value="BM" >Bermuda</option>
                                <option value="BT" >Bhutan</option>
                                <option value="BO" >Bolivia</option>
                                <option value="BA" >Bosnia and Herzegowina</option>
                                <option value="BW" >Botswana</option>
                                <option value="BV" >Bouvet Islands</option>
                                <option value="BR" >Brazil</option>
                                <option value="IO" >British Indian Ocean Territory</option>
                                <option value="VG" >British Virgin Islands</option>
                                <option value="BN" >Brunei Darussalam</option>
                                <option value="BG" >Bulgaria</option>
                                <option value="BF" >Burkina Faso</option>
                                <option value="BI" >Burundi</option>
                                <option value="KH" >Cambodia</option>
                                <option value="CM" >Cameroon</option>
                                <option value="CA" >Canada</option>
                                <option value="CB" >Canada Buffer</option>
                                <option value="CV" >Cape Verde</option>
                                <option value="KY" >Cayman Islands</option>
                                <option value="CF" >Central African Republic</option>
                                <option value="TD" >Chad</option>
                                <option value="CL" >Chile</option>
                                <option value="CN" >China</option>
                                <option value="CX" >Christmas Islands</option>
                                <option value="CC" >Cocos (Keeling) Island</option>
                                <option value="CO" >Colombia</option>
                                <option value="KM" >Comoros</option>
                                <option value="CG" >Congo</option>
                                <option value="CD" >Congo (Rep. Dem.)</option>
                                <option value="CK" >Cook Islands</option>
                                <option value="CR" >Costa Rica</option>
                                <option value="HR" >Croatia</option>
                                <option value="CU" >Cuba</option>
                                <option value="CY" >Cyprus</option>
                                <option value="CZ" >Czech Republic</option>
                                <option value="DK" >Denmark</option>
                                <option value="DJ" >Djibouti</option>
                                <option value="DO" >Dominican Republic</option>
                                <option value="DM" >Dominicana</option>
                                <option value="TP" >East Timor</option>
                                <option value="EC" >Ecuador</option>
                                <option value="EG" >Egypt</option>
                                <option value="SV" >El Salvador</option>
                                <option value="GQ" >Equatorial Guinea</option>
                                <option value="ER" >Eritrea</option>
                                <option value="EE" >Estonia</option>
                                <option value="ET" >Ethiopia</option>
                                <option value="EU" >European Monetary Union</option>
                                <option value="FK" >Falkland Islands</option>
                                <option value="FO" >Faroe Islands</option>
                                <option value="FJ" >Fiji Islands</option>
                                <option value="FI" >Finland</option>
                                <option value="FR" >France</option>
                                <option value="GF" >French Guiana</option>
                                <option value="PF" >French Polynesia</option>
                                <option value="TF" >French Southern Territories</option>
                                <option value="GA" >Gabon</option>
                                <option value="GM" >Gambia</option>
                                <option value="GE" >Georgia</option>
                                <option value="DE" >Germany</option>
                                <option value="GH" >Ghana</option>
                                <option value="GI" >Gibralter</option>
                                <option value="GR" >Greece</option>
                                <option value="GL" >Greenland</option>
                                <option value="GD" >Grenada</option>
                                <option value="GP" >Guadeloupe</option>
                                <option value="GU" >Guam</option>
                                <option value="GT" >Guatemala</option>
                                <option value="GN" >Guinea</option>
                                <option value="GW" >Guinea-Bissau</option>
                                <option value="GY" >Guyana</option>
                                <option value="HT" >Haiti</option>
                                <option value="HM" >Heard &amp; Mcdonald Islands</option>
                                <option value="HN" >Honduras</option>
                                <option value="HK" >Hong kong</option>
                                <option value="HU" >Hungary</option>
                                <option value="IS" >Iceland</option>
                                <option value="ID" >Indonesia</option>
                                <option value="IR" >Iran</option>
                                <option value="IQ" >Iraq</option>
                                <option value="IE" >Ireland</option>
                                <option value="IL" >Israel</option>
                                <option value="IT" >Italy</option>
                                <option value="CI" >Ivory Coast</option>
                                <option value="JM" >Jamaica</option>
                                <option value="JP" >Japan</option>
                                <option value="JO" >Jordan</option>
                                <option value="KZ" >Kazakhstan</option>
                                <option value="KE" >Kenya</option>
                                <option value="KI" >Kiribati</option>
                                <option value="KP" >Korea (Democratic People's Republic Of)</option>
                                <option value="KW" >Kuwait</option>
                                <option value="KG" >Kyrgyzstan</option>
                                <option value="LA" >Lao People's Democratic Republic</option>
                                <option value="LV" >Latvia</option>
                                <option value="LB" >Lebanon</option>
                                <option value="LS" >Lesotho</option>
                                <option value="LR" >Liberia</option>
                                <option value="LY" >Libyan Arab Jamahiriya</option>
                                <option value="LI" >Liechtenstein</option>
                                <option value="LT" >Lithuania</option>
                                <option value="QL" >Lithuania (Dummy Code)</option>
                                <option value="LU" >Luxembourg</option>
                                <option value="MO" >Macau</option>
                                <option value="MK" >Macedonia</option>
                                <option value="MG" >Madagascar</option>
                                <option value="MW" >Malawi</option>
                                <option value="MY" >Malaysia</option>
                                <option value="MV" >Maldives</option>
                                <option value="ML" >Mali</option>
                                <option value="MT" >Malta</option>
                                <option value="MH" >Marshall Islands</option>
                                <option value="MQ" >Martinique</option>
                                <option value="MR" >Mauritania</option>
                                <option value="MU" >Mauritius</option>
                                <option value="YT" >Mayotte</option>
                                <option value="MX" >Mexico</option>
                                <option value="MB" >Mexico Buffer</option>
                                <option value="FM" >Micronesia</option>
                                <option value="MD" >Moldova</option>
                                <option value="MC" >Monaco</option>
                                <option value="MN" >Mongolia</option>
                                <option value="MS" >Montserrat</option>
                                <option value="MA" >Morocco</option>
                                <option value="MZ" >Mozambique</option>
                                <option value="MM" >Myanmar</option>
                                <option value="NA" >Namibia</option>
                                <option value="NR" >Nauru</option>
                                <option value="NP" >Nepal</option>
                                <option value="NL" >Netherlands</option>
                                <option value="AN" >Netherlands Antilles</option>
                                <option value="NC" >New Caledonia</option>
                                <option value="NZ" >New Zealand</option>
                                <option value="NI" >Nicaragua</option>
                                <option value="NE" >Niger</option>
                                <option value="NG" >Nigeria</option>
                                <option value="NU" >Niue</option>
                                <option value="NF" >Norfolk Islands</option>
                                <option value="MP" >Northern Mariana Islands</option>
                                <option value="NO" >Norway</option>
                                <option value="OM" >Oman</option>
                                <option value="PK" >Pakistan</option>
                                <option value="PW" >Palau</option>
                                <option value="PS" >Palestinian Occ. Territories</option>
                                <option value="PA" >Panama</option>
                                <option value="PG" >Papua New Guinea</option>
                                <option value="PY" >Paraguay</option>
                                <option value="PE" >Peru</option>
                                <option value="PH" >Philippines</option>
                                <option value="PL" >Poland</option>
                                <option value="PT" >Portugal</option>
                                <option value="PR" >Puerto Rico</option>
                                <option value="QA" >Qatar</option>
                                <option value="RE" >Reunion</option>
                                <option value="RO" >Romania</option>
                                <option value="RW" >Ruanda</option>
                                <option value="RU" >Russian Federation</option>
                                <option value="LC" >Saint Lucia</option>
                                <option value="WS" >Samoa</option>
                                <option value="SM" >San Marino</option>
                                <option value="ST" >Sao Tome &amp; Principe</option>
                                <option value="SA" >Saudi Arabia</option>
                                <option value="SN" >Senegal</option>
                                <option value="SC" >Seychelles</option>
                                <option value="SL" >Sierra Leone</option>
                                <option value="SG" >Singapore</option>
                                <option value="SK" >Slovakia</option>
                                <option value="SI" >Slovenia</option>
                                <option value="SB" >Solomon Islands</option>
                                <option value="SO" >Somalia</option>
                                <option value="ZA" >South Africa</option>
                                <option value="GS" >South Georgia &amp; South Sandwich</option>
                                <option value="KR" >South Korea</option>
                                <option value="SU" >Soviet Union</option>
                                <option value="ES" >Spain</option>
                                <option value="LK" >Sri Lanka</option>
                                <option value="SH" >St. Helena</option>
                                <option value="KN" >St. Kitts and Nevis</option>
                                <option value="PM" >St. Pierre &amp; Miquelon</option>
                                <option value="VC" >St. Vincent &amp; the Grenadines</option>
                                <option value="SD" >Sudan</option>
                                <option value="SR" >Suriname</option>
                                <option value="SJ" >Svalbard &amp; Jan Mayen Islands</option>
                                <option value="SZ" >Swaziland</option>
                                <option value="SE" >Sweden</option>
                                <option value="CH" >Switzerland</option>
                                <option value="SY" >Syrian Arab Republic</option>
                                <option value="TW" >Taiwan</option>
                                <option value="TJ" >Tajikistan</option>
                                <option value="TZ" >Tanzania</option>
                                <option value="TH" >Thailand</option>
                                <option value="TG" >Togo</option>
                                <option value="TK" >Tokelau</option>
                                <option value="TO" >Tonga</option>
                                <option value="TT" >Trinidad and Tobago</option>
                                <option value="TN" >Tunisia</option>
                                <option value="TC" >Turcs &amp; Caicos Islands</option>
                                <option value="TR" >Turkey</option>
                                <option value="TM" >Turkmenistan</option>
                                <option value="TV" >Tuvalu</option>
                                <option value="UM" >U.S. Minor Outlaying Islands</option>
                                <option value="UG" >Uganda</option>
                                <option value="UA" >Ukraine</option>
                                <option value="AE" >United Arab Emirates</option>
                                <option value="GB" >United Kingdom</option>
                                <option value="UY" >Uruguay</option>
                                <option value="US" >USA</option>
                                <option value="UZ" >Uzbekistan</option>
                                <option value="VU" >Vanuatu</option>
                                <option value="VA" >Vatican City State</option>
                                <option value="VE" >Venezuela</option>
                                <option value="VN" >Vietnam</option>
                                <option value="VI" >Virgin Islands (US)</option>
                                <option value="WF" >Wallis &amp; Futuna Islands</option>
                                <option value="EH" >Western Sahara</option>
                                <option value="YE" >Yemen</option>
                                <option value="YU" >Yugoslavia</option>
                                <option value="ZM" >Zambia</option>
                                <option value="ZW" >Zimbabwe</option>
                            </select>
                            <i class="icon-time"></i>
                        </div>
                    </div>
                </fieldset>
                <input type="hidden" id="hiddenEmail" name="hiddenEmail" value="{{ hidden_email }}">
                <input type="hidden" id="hiddenPhoneNumber" name="hiddenPhoneNumber" value="{{ hidden_phone_number }}">
                <input type="hidden" id="hiddenUsername" name="hiddenUsername" value="{{ hidden_username }}">
                <fieldset class="scheduler-border col-md-2 mb-3">
                    <legend class="scheduler-border">Person & Rooms</legend>
                    <div class="control-group">
                        <div class="controls bootstrap-timepicker">
                            <input type="text" value="1 Room & 2 Adults "  readonly id="room" style="font-size: 14px;" onclick="showForm()">
                            <input type="hidden" id="roomInfoInput" name="roomInfoInput">
                            <input type="hidden" id="totalRoomInfoInput" name="totalRoomInfoInput">
                            <!-- <input type="hidden" id="totalNoOfRooms" name="totalNoOfRooms"> -->
                        </div>
                    </div>
                </fieldset>
                <div class="col-md-12 text-end mb-2" id="btn">
                    <button type="submit" class="btn btn-primary" id="search-btn">Search</button>
                </div>
            </form>
        </div>
    </section>

    <section id="form">
        <div id="wrapper">
            <div id="form_div">
                <table class="table table-hover text-nowrap" id="attribute_table">
                    <thead>
                        <tr>
                            <th class="room-h">Room</th>
                            <th class="room-h">Adults</th>
                            <th class="room-h">Child</th>
                            <th class="room-h" id="age_1">Age 1</th>
                            <th class="room-h" id="age_2">Age 2</th>
                            <th class="room-h" id="age_3">Age 3</th>
                            <th class="room-h" id="age_4">Age 4</th>
                            <!-- <th class="room-h">Child 1</th> -->
                        </tr>
                    </thead>
                    <tr id="row1" class="room-info">
                        <td class="room_no">Room1</td>
                        <td>
                            <select name='attribute_name' class='selectbox_form attribute_name' id="adult_1" onchange="getAdultCount()">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </td>
                        <td>
                            <select name='attribute_id' id="child_1" class='selectbox_form  attribute_value' onchange="getAdultCount()">
                                <option data-parent='0' value='0'>Select</option>
                                <option  value="1">1</option>
                                <option value='2'>2</option>
                                <option value='3'>3</option>
                                <option value='4'>4</option>
                            </select>
                        </td>
                        <td>
                            <select id="childage_1_1" class='selectbox_form  attribute_value' onchange="getAdultCount()">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </td>
                        <td>
                            <select  id="childage_1_2" class='selectbox_form  attribute_value' onchange="getAdultCount()">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </td>
                        <td>
                            <select id="childage_1_3" class='selectbox_form  attribute_value' onchange="getAdultCount()">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </td>
                        <td>
                            <select id="childage_1_4" class='selectbox_form attribute_value' onchange="getAdultCount()">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                    </tr>
                </table>

                <input class="btn" id="add-btn" type="button" onclick="add_attribute_row();" value="Add Room+">

                <input class="btn " id="remove-btn" type="button" onclick="del_att_row();" value="Remove Room-">
            </div>
            <button class="btn btn-primary" id="app-btn" onclick="hideForm()">Apply</button>
        </div>
        
    </section>

    <!-- FORM  -->
    

    <script>
       
        function getAdultCount() {
            $rowno = $("#attribute_table tr").length-2
            totaladult=0
            totalchild=0
            roominfo=[]
            totalroominf0=[]

            for(i=1;i<=$rowno;i++) {
                totaladult=parseInt(totaladult) + parseInt($("#adult_"+i).val())
                totalchild=parseInt(totalchild) + parseInt($("#child_"+i).val())
                // var childAge = parseInt($("#child_"+i).val()) !== 0 ? [parseInt($("#childage_"+i).val())] : null;
                
                // Handle the first row separately
                // var childrenCountFirstRow = parseInt($("#child_1").val());
                // var childAgeFirstRow = [];

                // for (var k = 1; k <= childrenCountFirstRow; k++) {
                //     var ageFirstRow = parseInt($("#childage_" + k).val());
                //     if (!isNaN(ageFirstRow)) {
                //         childAgeFirstRow.push(ageFirstRow);
                //     }
                // }

                // roominfo[0] = {
                //     "NoOfAdults": parseInt($("#adult_1").val()),
                //     "NoOfChild": parseInt($("#child_1").val()),
                //     "ChildAge": childAgeFirstRow
                // };
                

                var childrenCount = parseInt($("#child_" + i).val());
                var childAge = [];

                for (var j = 1; j <= childrenCount; j++) {
                var age = parseInt($("#childage_" + i + "_" + j).val());
                if (!isNaN(age)) {
                    childAge.push(age);
                }
              
            }
    
                roominfo[i-1]={"NoOfAdults":parseInt($("#adult_"+i).val()) ,"NoOfChild":parseInt($("#child_"+i).val()),"ChildAge":childAge }
                

                // roominfo[i-1]={"NoOfAdults":parseInt($("#adult_"+i).val()) ,"NoOfChild": parseInt($("#child_"+i).val()),"ChildAge": childAge }
            }

            var roomCount = $rowno + " " + "Room" +" " + "&" + " " + totaladult +" " + "Adults";
            document.getElementById('room').value = roomCount;
            
            showChildAgeSelectors()

            // console.log($rowno,totaladult,totalchild)
            totalroominf0={"TotalRooms":$rowno,"NoOfAdults":totaladult,"NoOfChild":totalchild}
            console.log(roominfo,totalroominf0)
            console.log(totalroominf0)

            document.getElementById('roomInfoInput').value = JSON.stringify(roominfo);
            document.getElementById('totalRoomInfoInput').value = JSON.stringify(totalroominf0);
            document.getElementById('totalNoOfRooms').value = $rowno;

            // document.getElementById('roomInfoInput').value = JSON.stringify(roominfo);
            // document.getElementById('totalRoomInfoInput').value = JSON.stringify({
            //     "TotalRooms": $rowno,


            };

            function showChildAgeSelectors() {
            // Hide all child age selectors first
            $("[id^=childage_]").hide();
            $("[id^=age_]").hide();

            // Get the number of children selected in the first row
            var childrenCountFirstRow = parseInt($("#child_1").val());

            // Show the corresponding child age selectors in the first row
            for (var i = 1; i <= childrenCountFirstRow; i++) {
                $("#childage_" + i).show();
                $("#age_" + i).show();
            }
            

            // Iterate through each dynamically added row
            $("#attribute_table tr").each(function(index, row) {
                var rowNumber = index + 1;
                var childrenCount = parseInt($("#child_" + rowNumber).val());

                // Show the corresponding child age selectors for each dynamically added row
                for (var i = 1; i <= childrenCount; i++) {
                    $("#childage_" + rowNumber + "_" + i).show();
                    $("#age_" + i).show();
                }
            });

            
        }


        function hideForm() {
        var x = document.getElementById("form");
        if (x.style.display === "block") {
            // If the form is being hidden, validate the previous row before hiding
            var prevRowNo = $("#attribute_table tr").length - 2; // Get the previous row number
            if (!validatePreviousRow(prevRowNo)) {
                alert("Please select valid options for the Adults.");
                return; // Do not hide the form if validation fails
            }
            x.style.display = "none";
        } else {
            x.style.display = "none";
        }
    }


    function add_attribute_row() {
    // Get the current number of rows
    var $rowno = $("#attribute_table tr").length - 1;

    // Check if the limit of 6 rows has been reached
    if ($rowno <= 6) {
        // Check if the previous row's selects have valid values
        var prevRowIsValid = validatePreviousRow($rowno - 1);

        if (prevRowIsValid) {
            // Add a new row
            $("#attribute_table tr:last").after("<tr  id='row" + $rowno + "'>" +
                "<td class='room_no'>Room" + $rowno + "</td>" +
                "<td><select name='attribute_name' onchange='getAdultCount()' id='adult_" + $rowno + "' class='selectbox_form  attribute_name'>" +
                "<option value='1' selected>1</option><option value='2'>2</option><option value='3'>3</option>" +
                "<option value='4'>4</option><option value='5'>5</option><option value='6'>6</option></select></td>" +
                "<td><select name='attribute_id' id='child_" + $rowno + "' onchange='getAdultCount()' class='selectbox_form  attribute_value'>" +
                "<option data-parent='0' value='0'>Select</option><option data-parent='Colour' value='1'>1</option><option data-parent='Colour' value='2'>2</option>" +
                "<option data-parent='Colour' value='3'>3</option><option data-parent='Colour' value='4'>4</option></select></td></tr>");

            for (var i = 1; i <= 4; i++) {
                $("#row" + $rowno).append("<td><select id='childage_" + $rowno + "_" + i + "' onchange='getAdultCount()' class='selectbox_form  attribute_value'>" +
                    "<option data-parent='Colour' value='1'>1</option><option data-parent='Colour' value='2'>2</option>" +
                    "<option data-parent='Colour' value='3'>3</option><option data-parent='Colour' value='4'>4</option><option data-parent='Colour' value='5'>5</option>" +
                    "<option data-parent='Colour' value='6'>6</option><option data-parent='Colour' value='7'>7</option><option data-parent='Colour' value='8'>8</option>" +
                    "<option data-parent='Colour' value='9'>9</option><option data-parent='Colour' value='10'>10</option><option data-parent='Colour' value='11'>11</option>" +
                    "<option data-parent='Colour' value='12'>12</option></select></td>");
            }

            // Call the getAdultCount function
            showChildAgeSelectors();
            getAdultCount();
        } else {
            // Alert the user or handle the case where the previous row's selects are not valid
            alert("Please select valid options for the Adults.");
        }
    } else {
        // Alert the user or handle the case where the limit is reached
        alert("Only 6 rooms are allowed.");
        }
    }

    // Function to validate the selects of the previous row
    function validatePreviousRow(prevRowNo) {
    // Check if the previous row's selects have valid values
    var adultValue = $("#adult_" + prevRowNo).val();
    // var childValue = $("#child_" + prevRowNo).val();

    // Return true if both selects have valid values, otherwise false
    return adultValue !== "0" ;
    }


function del_att_row() {
        rowno = $("#attribute_table tr").length-2 ;
        if(rowno > 1)
        $('#row' + rowno).remove();
        showChildAgeSelectors();
        getAdultCount()
    }

       
 </script>
 

    <!-- FOOTER -->
    <footer class="bg-dark text-white">
        <div class="container">
            <div class="row align-items-center footer">
                <div class="col-md-2 footer-img">
                    <img src="{% static 'image/booking/Magnet logo.png' %}" alt="VF Logo" class="img-fluid">
                </div>
                <div class="col-md-2 footer-icons">
                    <img src="{% static 'image/booking/facebook Icons.svg' %}" alt="Facebook Icon" class="footer-icon">
                    <img src="{% static 'image/booking/x Icons.svg' %}" alt="X Icon" class="footer-icon">
                    <img src="{% static 'image/booking/youtube Icons.svg' %}"  alt="YouTube Icon" class="footer-icon">
                    <img src="{% static 'image/booking/insta Icons.svg' %}" alt="Instagram Icon" class="footer-icon">
                    <img src="{% static 'image/booking/linked in Icons.svg' %}" alt="LinkedIn Icon" class="footer-icon">
                </div>
            </div>
        </div>
    </footer>  

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DATE FUNCTIONS ------------------- -->
    <script>
        $(function () {
            // Initialize Datepicker for the first date
            $("#check-in").datepicker({
            minDate: 0, // Minimum date is today
            dateFormat: 'dd MM yy', // Set the date format
            onSelect: function (dateText, inst) {
                // Update the data-date attribute using moment.js
                $(this).attr("data-date", moment(dateText, "DD MMMM YYYY").format($(this).attr("data-date-format")));

                // Calculate the next date using moment.js
                var nextDate = moment(dateText, "DD MMMM YYYY").add(1, 'days').format("DD MMMM YYYY");

                // Set the default date for the second datepicker to one day after the selected date
                $("#check-out").datepicker("option", "minDate", nextDate);
                $("#check-out").datepicker("setDate", nextDate);
            }
            });

            // Initialize Datepicker for the second date
            $("#check-out").datepicker({
            minDate: 1, // Minimum date is one day after today
            dateFormat: 'dd MM yy', // Set the date format
            });

            // Set the default date to today for the first datepicker
            $("#check-in").datepicker("setDate", new Date());

            // Set the default date for the second datepicker to one day after today
            var nextDefaultDate = moment().add(1, 'days').format("DD MMMM YYYY");
            $("#check-out").val(nextDefaultDate);
        });

   
        //   DEFAULT ADULT FUNCTIONS
 
        $(document).ready(function() {
            $("#adult_1").val("2");
            getAdultCount();
            });
   
        // LOADER --------------------------------------------------------

        var loader =  document.getElementById("preloader")
                window.addEventListener("load", function() {
                    loader.style.display="none"
                })

    </script>
    <script type="text/javascript">
        window.addEventListener('pageshow', function(event) {
            var historyTraversal = event.persisted || (typeof window.performance != 'undefined' && window.performance.navigation.type === 2);
            if (historyTraversal) {
                // Reload the page if navigating back
                window.location.reload();
            }
        });
    </script>

    <!-- STYLES -->
    <style>

        #form {
            /* margin: -50px 20px 20px 700px; */
            background:  rgba(255, 255, 255, 1);
            /* width: 700px; */
            padding: 10px;
            height: auto;
            position: absolute;
            box-shadow: 5px 5px 12px grey;
            border-radius: 10px;
            justify-content: center;
            align-items: center;
            z-index: 99;
            display: none;
        }

         legend {
            float: none;
            width: auto;
            /* padding: 0; */
            padding: 2px 6px;
            margin-bottom: 0.5rem;
            font-size: calc(1.275rem + .3vw);
            line-height: inherit;
            font-weight: 600;
            font-size: 1em !important;
        }

        legend.scheduler-border {
            font-size: 0.9em !important;
            font-weight: normal !important;
            text-align: left !important;
        }

        .selectbox_form {
            width: 60px;
            padding:6px 4px;
            border-radius: 8px;
        }

        #form select {
            font-size: 12px;
        }

        .table>:not(caption)>*>* {
                padding: 4px !important;
            }

        .nav-item a {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 1) !important;
        }

        #log-btn {
            color: black;
            background-color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
        }

        #log-btn:hover {
            background-color: rgba(41, 41, 41, 0.8);
            color: white;
        }

        


        
        @media only screen and (max-width: 768px) {
            #main_container {
                flex-direction: column;
            }

            fieldset.scheduler-border {
                width: 100% !important;
            }

            .titles {
                font-size: 17px;
                font-weight: 600;
            }

            #form select {
                font-size: 10px;
            }

            .table>:not(caption)>*>* {
                padding: 4px !important;
            }

            .selectbox_form {
                width: 40px;
                padding: 4px;
                border-radius: 8px;
            }

            .room-h {
                font-size: 14px;
            }

            .room_no {
                font-size: 13px;
            }
        }

        @media only screen and (max-width: 1235px) {
            fieldset.scheduler-border {
                margin: 0 0.19em 1.5em 0 !important;
            }
        }

        
        @media only screen and (max-width: 1023px) {
            fieldset.scheduler-border {
                padding: 4px !important;
            }
        }

        @media only screen and (max-width: 880px) {
            fieldset.scheduler-border {
                padding: 4px !important;
            }

            fieldset.scheduler-border {
                width: 200px;
            }

            #input-sec {
                justify-content: space-between;
            }
        }


           
 #form {
    margin: -50px 20px 20px 950px;
    /* Media query for screens up to 500px */
    @media only screen and (min-width: 400px) and (max-width: 500px) {
        margin: -65px 20px 20px;
        padding: 6px;
    }

    /* Media query for screens up to 700px */
    @media only screen and (min-width: 300px) and (max-width: 400px) {
        margin: -65px 2px 10px 2px;
    }

    /* Media query for screens up to 700px */
    @media only screen and (min-width: 501px) and (max-width: 700px) {
        margin: -65px 10px 10px 100px;
    }

    /* Media query for screens up to 900px */
    @media only screen and (min-width: 701px) and (max-width: 913px) {
        margin: -65px 10px 10px 250px;
    }

    /* Media query for screens up to 1100px */
    @media only screen and (min-width: 913px) and (max-width: 1100px) {
        margin: -65px 10px 10px 400px;
    }

     /* Media query for screens up to 1100px */
     @media only screen and (min-width: 1100px) and (max-width:1200px ) {
        margin: -65px 10px 10px 540px;
    }

    /* Media query for screens up to 1100px */
    @media only screen and (min-width: 1100px) and (max-width:1280px ) {
        margin: -65px 10px 10px 650px;
    }

    /* Media query for screens up to 1100px */
    @media only screen and (min-width: 1280px) and (max-width: 1400px) {
        margin: -65px 10px 10px 716px;
    }

}
        

         

    </style>

    <!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>  -->
</body>
</html>