{% load static %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zxx">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Travelin - Travel Tour Booking HTML Templates</title>
     <!-- Favicon -->
     <link rel="shortcut icon" type="image/x-icon" href="{% static 'image/home/Magnet logo.png' %}">
     <!-- Bootstrap core CSS -->
     <link href="{% static 'css/home/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
     <!--Custom CSS-->
     <link href="{% static 'css/home/style.css' %}" rel="stylesheet" type="text/css">
     <!--Plugin CSS-->
     <link href="{% static 'css/home/plugin.css' %}" rel="stylesheet" type="text/css">

    <!--Font Awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"> -->

 
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"> -->
    <!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->

    <link rel="stylesheet" href="fonts/line-icons.css" type="text/css">
</head>

    <!-- Preloader -->
    <div id="preloader">
        <div id="status"></div>
    </div>
    <!-- Preloader Ends -->

    <!-- header starts -->
    {% include 'home/header.html' %}
    <!-- header ends -->

    <!-- BreadCrumb Starts -->  
    <section class="breadcrumb-main pb-20 pt-14" style="background-image: url(images/bg/bg1.jpg);">
        <div class="section-shape section-shape1 top-inherit bottom-0" style="background-image: url(images/shape8.png);"></div>
        <div class="breadcrumb-outer">
            <div class="container">
                <div class="breadcrumb-content text-center">
                    <h1 class="mb-3">Booking</h1>
                    <nav aria-label="breadcrumb" class="d-block">
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Booking</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <!-- <div class="dot-overlay"></div> -->
    </section>
    <!-- BreadCrumb Ends --> 
    <button type="button" id="timeOutBtn" class="btn btn-primary d-none" data-toggle="modal" data-target="#exampleModal">
        Timeout
    </button>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Timeout</h5>
              <!-- <button type="button" class="close-btn" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button> -->
            </div>
            <div class="modal-body">
                <div id="customPopup" class="container popup">
                    <div class="popup-content col-md-12 text-center">
                        <p >Your session has timed out. Please try again.</p>
                        <!-- <button  class="btn btn-primary ses-btn"></button> -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="{% url 'hotel' %}"><button type="button" class="btn btn-secondary">Ok</button></a>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title cp_head" id="exampleModalLongTitle">Cancellation Policy</h5>
            <button type="button" class="close-btn" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                <div class="mt-2">
                    <p class="cp_refund">Full Refund Allowed</p>
                    <table class="table table-bordered">
                        <thead>
                            <tr class="t_head">
                                <th>Cancelled on or After</th>
                                <th>Cancelled on or Before</th>
                                <th>Cancellation Charges</th>
                            </tr>
                        </thead>
                        <input type="hidden" id="CancellationPolicies" value="{{ details.CancellationPolicies }}">
                        <tbody id="cancellationPoliciesTableBody">
                            <tr>
                                <td>16-Dec-2023 00:00:00</td>
                                <td>18-Dec-2023 23:59:59</td>
                                <td>4029 Amount Charges.</td>
                            </tr>
                        </tbody>
                    </table>
                   
                    <ul  class="cp_list">
                        <li>No Show will attract full cancellation charge unless otherwise specified.</li>
                        <li>Early check out will attract full cancellation charge unless otherwise specified.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
        </div>
    </div>

    <!-- top Destination starts -->
    <section class="trending pt-6 pb-0 bg-lgrey">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mb-4">
                    <div class="payment-book">
                        <div class="booking-box">
                            <div class="customer-information mb-4 d-flex align-items-center bg-grey rounded p-4">
                                <i class="fa fa-grin-wink rounded fs-1 bg-theme white p-3 px-4"></i>
                                <button type="button" class="p-2" data-toggle="modal" data-target="#exampleModalCenter">
                                    Cancellation Policy
                                </button>
                                <a href="" style="display: none;"><p>{{ details.cancellation_policy }}</p></a>
                               
                            </div>
                         
                            <!-- pop in cancellation policy -->
                           

                            <input type="hidden" class="block_book" name="block_book" placeholder="block_book" value="{{ current_time }}">
                            <input type="hidden" class="hide_123_val" name="hide_123_val" placeholder="block_book" value="{{ future_time }}">
                            <input type="hidden" class="category_id" name="category_id" placeholder="category_id" value="{{ category_id }}">
                            <div class="customer-information mb-4">
                                <h3 class="border-b pb-2 mb-2">Traveller Information</h3>
                                <form class="mb-2"  method="POST" action="{% url 'previewpage' %}" id="paymentForm" onsubmit="return validateForm()">
                                    {% csrf_token %}
                                    <div class=" mt-3 p-3" style="border:8px solid #A3C2F445;">
                                        <div class="d-flex" style="border-radius: 10px;">
                                            <h4 class="heading">Contact Details</h4>
                                        </div> 
                                        <div>
                                            <p class="guide_text">Please enter user name and mobile number where you would like to receive your confirmation.</p>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <input type="text" class="username" name="user_name" placeholder="Enter Your Name" value="">
                                                <span class="error" id="nameError"></span>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="phone_number" name="phone_number" placeholder="Enter Your Number" value="" >
                                                <span class="error" id="phoneError"></span>
                                            </div>
                                            <div class="col-lg-4">
                                                <input type="text" class="email" name="email" placeholder="Enter Your Email" value="" >
                                                <span class="error" id="emailError"></span>
                                            </div>
                                            
                                        </div>
                                        <div>
                                            <input type="hidden" class="published_amount" name="published_amount" placeholder="User Name" value="{{ details.total_price }}">
                                            <input type="hidden" class="payment_flag" name="payment_flag" placeholder="User Name" value="process">
                                            <input type="hidden" class="payment_id" name="payment_id" placeholder="User Name" value="1a2c">
                                            <input type="hidden" class="room_information" name="room_information" placeholder="User Name" value="{{ details }}">
                                            <input type="hidden" id="curTime" name="curTime">
                                            <input type="hidden" class="payed_amount" name="payed_amount" placeholder="User Name" value="0">
                                        </div>
                                        <!-- <div class="d-flex col-md-12 mt-3" style="margin: 0px 5px;">
                                            <input id="contactCheckbox" type="checkbox" style="width: 20px;height: 20px;margin-top: 9px; margin-right: 10px;">
                                            <label for="" class="checkinput mb-3" style="font-size: 14px;color:#0071FF;;">Select login number as contact number</label>
                                            <span class="error" id="checkboxError"></span>
                                        </div> -->
                                    </div>
                                    <!-- <h5>Let us know who you are</h5> -->
                                    <div class="mt-3 p-3" id="guestDetailsContainer" style="border:8px solid #A3C2F445;">
                                        <div class="row">
                                            <h2 class="heading">Guest Information</h2>
                                            <p class="u_heading">Enter the details of the guest</p>
                                        </div>
                                        <!-- <div class="col-md-2">
                                            <div class="form-group mb-2">
                                                <label>Title</label>
                                                <div class="input-box">
                                                    <select class="niceSelect">
                                                        <option value="0">Select</option>
                                                        <option value="1">Mr.</option>
                                                        <option value="2">Mrs.</option>
                                                    </select>
                                                </div>                            
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="form-group mb-2">
                                                <label>First Name</label>
                                                <input type="text" placeholder="First Name">
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="form-group mb-2">
                                                <label>Last Name</label>
                                                <input type="text" placeholder="Last Name">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group mb-2">
                                                <label>Email</label>
                                                <input type="email" placeholder="Email Address">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group mb-2">
                                                <label>Phone</label>
                                                <input type="text" placeholder="Phone No.">
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-6">
                                            <div class="form-group">
                                                <label>Gender</label>
                                                <div class="input-box">
                                                    <select class="niceSelect">
                                                        <option value="0">Select Gender</option>
                                                        <option value="1">Male</option>
                                                        <option value="2">Female</option>
                                                    </select>
                                                </div>                            
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-6">
                                            <div class="form-group mb-2">
                                                <label>DOB</label>
                                                <div class="input-box">
                                                    <input id="date-range" type="date">
                                                </div> 
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-12">
                                            <div class="form-group mb-2">
                                                <label>Select Country</label>
                                                <div class="input-box">
                                                    <select class="niceSelect">
                                                        <option value="0">Albania</option>
                                                        <option value="1">Malaysia</option>
                                                        <option value="2">Singapore</option>
                                                        <option value="3">Japan</option>
                                                        <option value="4">Thailand</option>
                                                    </select>
                                                </div>                            
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-sm-12">
                                            <div class="form-group mb-2">
                                                <label>Select City</label>
                                                <div class="input-box">
                                                    <select class="niceSelect">
                                                        <option value="0">Istanbul</option>
                                                        <option value="1">London</option>
                                                        <option value="2">Texas</option>
                                                        <option value="3">Tokyo</option>
                                                        <option value="4">Bangkok</option>
                                                    </select>
                                                </div>                            
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group mb-2">
                                                <label>Address Line 1</label>
                                                <input type="text" placeholder="Address line 1">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group mb-2">
                                                <label>Address Line 2</label>
                                                <input type="text" placeholder="Address line 2">
                                            </div>
                                        </div> -->

                                    </div>
                                    <div class="mt-3 col-md-12">
                                        <p class="heading">Special Request (Optional)</p>
                                        <textarea name="req" id="req" cols="50" rows="5"></textarea>
                                    </div>
                                    <input type="hidden" class="room_information" name="user_information" placeholder="User Name" value="">
                                    <div id="hiddenGuestData" style="display: none;">{{ personsdetails }}</div>
                                    <div class="mt-3 col-md-12 text-end">
                                        <button type="submit" id="myButton" onclick="sendit()" class="nir-btn float-lg-end w-25">Proceed To Preview</button>
                                    </div>
                                </form>
                            </div>
                            
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 mb-4 ps-ld-4">
                    <div class="sidebar-sticky">
                        <div class="sidebar-item bg-white rounded box-shadow overflow-hidden p-3 mb-4">
                            <h4>Pricing Details</h4>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>Base Fare ({{ details.totalrooms }}Room X {{ details.No_of_Night }}Night)</td>
                                        <td class="theme2">INR {{ details.published_price }}</td>
                                    </tr>
                                    <tr>
                                        <td>Taxes and Fees</td>
                                        <td class="theme2">INR {{ details.final_tax }}</td>
                                    </tr>
                                    <tr>
                                        <td>Total Price</td>
                                        <td class="theme2">INR {{ details.total_price }}</td>
                                    </tr>
                                   
                                </tbody>
                                <tfoot class="bg-title">
                                    <tr>
                                        <th class="font-weight-bold white">Your Price</th>
                                        <th class="font-weight-bold white">INR {{ details.total_price }}</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="sidebar-item bg-white rounded box-shadow overflow-hidden p-3 mb-4">
                            <h4>Hotel Summary</h4>
                            <div class="trend-full border-b pb-2 mb-2">
                                <div class="row">
                                    <!-- <div class="col-lg-4 col-md-4">
                                       <div class="trend-item2 rounded">
                                            <a href="destination-single1.html" style="background-image: url(images/destination/destination17.jpg);"></a>
                                             <div class="color-overlay"></div>
                                        </div> 
                                    </div> -->
                                    <div class="col-lg-12 col-md-12 ps-0">
                                        <div class="trend-content position-relative">
                                            <div class="rating star-view mb-1">
                                                {% for star in "12345" %}
                                                <span class="fa fa-star {% if forloop.counter <= details.rating %}checked{% else %}unchecked{% endif %}"></span>
                                               {% endfor %}
                                            </div>
                                            <h5 class="mb-1"><a href="grid-leftfilter.html">{{ details.hotel_name }}</a></h5>
                                            <h6 class="mb-0">{{ details.address }}</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="trend-check border-b pb-2">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="trend-check-item bg-grey rounded p-3 mb-2">
                                            <p class="mb-0">Check In</p>
                                            <h6 class="mb-0">{{ details.check_in_date }}</h6>
                                            <!-- <small>15:00 - 22:00</small> -->
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="trend-check-item bg-grey rounded p-3 mb-2">
                                            <p class="mb-0">Check Out</p>
                                            <h6 class="mb-0">{{ details.check_out_date }}</h6>
                                            <!-- <small>1:00 - 10:00</small> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="trend-check border-b pb-2 mb-2">
                                <p class="mb-0">Night(s)</p>
                                <h6 class="mb-0">{{ details.No_of_Night }} </h6>
                                <!-- <small><a href="#" class="theme text-decoration-underline">travelling on different dates?</a></small> -->
                            </div>
                            <div class="trend-check">
                                <!-- <p class="mb-0">You Selected:</p> -->
                                <h6 class="mb-0">Adults <span class="float-end fw-normal">{{ details.adults }}</span> </h6>
                                <h6 class="mb-0">Children <span class="float-end fw-normal">{{ details.childs }}</span> </h6>
                                <!-- <small><a href="#" class="theme text-decoration-underline">Change your selection</a></small> -->
                            </div>

                        </div>  
                        
                        <!-- <div class="sidebar-item bg-white rounded box-shadow overflow-hidden p-3 mb-4">
                            <h4>Your Payment Schedule</h4>
                            <p class="mb-0">Before you stay you'll pay <span class="float-end">$40.00</span></p>
                        </div> -->
                        <!-- <div class="sidebar-item bg-white rounded box-shadow overflow-hidden p-3">
                            <h4>Do you have a promo code?</h4>
                            <input type="text" name="">
                            <a href="#" class="nir-btn-black mt-2">Apply</a>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- top Destination ends -->

    <!-- Discount action Ends -->

    <footer id="footer" class="text-center container-fluid mt-3 mb-1">
        <p id="timer">Time remaining: 10:00</p>
    </footer>
  

    <!-- footer starts -->
    {% include 'home/footer.html' %}
    <!-- footer ends -->
    
    <!-- Back to top start -->
    <div id="back-to-top">
        <a href="#"></a>
    </div>
    <!-- Back to top ends -->




    <script src="{% static 'js/home/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/home/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/home/particles.js' %}"></script>
    <script src="{% static 'js/home/particlerun.js' %}"></script>
    <script src="{% static 'js/home/plugin.js' %}"></script>
    <script src="{% static 'js/home/main.js' %}"></script>
    <script src="{% static 'js/home/custom-accordian.js' %}"></script>
    <script src="{% static 'js/home/custom-nav.js' %}"></script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        // Sample data similar to details.CancellationPolicies
        var cancellationPoliciesString = document.getElementById("CancellationPolicies").value;
        var cancellationPolicies = JSON.parse(cancellationPoliciesString);
        console.log(cancellationPolicies)
        
        // Function to generate <tr> elements dynamically
        function generateCancellationPolicyRows() {
            var tableBody = document.getElementById("cancellationPoliciesTableBody");
            var tableRows = "";
        
            // Loop over cancellation policies and generate <tr> elements
            cancellationPolicies.forEach(function(policy) {
                // Format FromDate and ToDate
                var fromDate = new Date(policy.FromDate).toLocaleString('en-US', {day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit'});
                var toDate = new Date(policy.ToDate).toLocaleString('en-US', {day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit'});
        
                var row = `
                    <tr>
                        <td>${fromDate}</td>
                        <td>${toDate}</td>
                        <td>${policy.Charge} ${policy.Currency} Amount Charges.</td>
                    </tr>
                `;
                tableRows += row;
            });
        
            // Update the table body with generated rows
            tableBody.innerHTML = tableRows;
        }
        
        // Call the function to generate rows
        generateCancellationPolicyRows();
    </script>
       <script>
        function validateForm() {
        var valid = true;

        document.getElementById('nameError').innerText = '';
        document.getElementById('phoneError').innerText = '';
        document.getElementById('emailError').innerText = '';

        var nameInput = document.querySelector('.username');
        var phoneInput = document.querySelector('.phone_number');
        var emailInput = document.querySelector('.email');

        var name = nameInput.value;
        var phone = phoneInput.value;
        var email = emailInput.value;

        if (name.trim() === '') {
            document.getElementById('nameError').innerText = 'Name is required';
            nameInput.style.border = '1px solid red';
            valid = false;
        } else {
            nameInput.style.border = ''; // Reset border style if valid
        }

        var phonePattern = /^\d{10}$/;
        if (phone.trim() === '') {
            document.getElementById('phoneError').innerText = 'Phone number is required';
            phoneInput.style.border = '1px solid red';
            valid = false;
        } else if (!phonePattern.test(phone)) {
            document.getElementById('phoneError').innerText = 'Invalid phone number';
            phoneInput.style.border = '1px solid red';
            valid = false;
        } else {
            phoneInput.style.border = ''; // Reset border style if valid
        }

        var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email.trim() === '') {
            document.getElementById('emailError').innerText = 'Email is required';
            emailInput.style.border = '1px solid red';
            valid = false;
        } else if (!emailPattern.test(email)) {
            document.getElementById('emailError').innerText = 'Invalid email address';
            emailInput.style.border = '1px solid red';
            valid = false;
        } else {
            emailInput.style.border = ''; // Reset border style if valid
        }

        guestData.forEach(function (room, roomIndex) {
        for (var i = 0; i < room.NoOfAdults; i++) {
            var adultFirstName = document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_first_name"]`);
            var adultLastName = document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_last_name"]`);

            if (adultFirstName.value.trim() === '') {
                document.getElementById(`firstNameError_${roomIndex + 1}_adult_${i + 1}`).innerText = 'Please Enter the first name';
                adultFirstName.style.border = '1px solid red';
                valid = false;
            } else {
                adultFirstName.style.border = '';
                document.getElementById(`firstNameError_${roomIndex + 1}_adult_${i + 1}`).innerText = ' '; // Reset border style if valid
            }

            if (adultLastName.value.trim() === '') {
                document.getElementById(`lastNameError_${roomIndex + 1}_adult_${i + 1}`).innerText = 'Please Enter the last name';
                adultLastName.style.border = '1px solid red';
                valid = false;
            } else {
                adultLastName.style.border = ''; // Reset border style if valid
                document.getElementById(`lastNameError_${roomIndex + 1}_adult_${i + 1}`).innerText = ' ';
            }
        }

        for (var j = 0; j < room.NoOfChild; j++) {
            var childFirstName = document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_first_name"]`);
            var childLastName = document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_last_name"]`);

            if (childFirstName.value.trim() === '') {
                document.getElementById(`cfirstNameError_${roomIndex + 1}_child_${j + 1}`).innerText = 'Please Enter the first name';
                childFirstName.style.border = '1px solid red';
                valid = false;
            } else {
                childFirstName.style.border = ''; // Reset border style if valid
                document.getElementById(`cfirstNameError_${roomIndex + 1}_child_${j + 1}`).innerText = ' ';
            }

            if (childLastName.value.trim() === '') {
                document.getElementById(`clastNameError_${roomIndex + 1}_child_${j + 1}`).innerText = 'Please Enter the last name';
                childLastName.style.border = '1px solid red';
                valid = false;
            } else {
                childLastName.style.border = ''; // Reset border style if valid
                document.getElementById(`clastNameError_${roomIndex + 1}_child_${j + 1}`).innerText = ' ';
            }
        }
    });


        var specialRequest = document.getElementById('req').value;

        return valid;
    }
    </script>
    <script>
        var personsdetails = document.getElementById('hiddenGuestData').textContent;
        var guestData = JSON.parse(personsdetails || "[]");

        console.log(guestData);

        function generateRoomDetails() {
            var container = document.getElementById('guestDetailsContainer');
            container.innerHTML = ''; // Clear existing content


            guestData.forEach(function (room, roomIndex) {
                var roomElement = document.createElement('div');
                roomElement.className = 'mt-2  p-1';
                roomElement.style.backgroundColor = 'cornsilk';
                roomElement.innerHTML = `<h3 style="color:#029e9d">Room ${roomIndex + 1}</h3>`;


                for (var i = 0; i < room.NoOfAdults; i++) {
                    var adultElement = document.createElement('div');
                    adultElement.className = 'my-2';
                    
                    adultElement.innerHTML = `
                        <div class="">
                            <h4 class="name_no">Adult ${i + 1}</h4>
                        </div>
                        <div class="row">
                            <div class="col-lg-4">
                                <select name="room_${roomIndex + 1}_adult_${i + 1}_gender">
                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Miss">Miss</option>
                                </select>
                            </div>
                            <div class="col-lg-4">
                                <input type="text" placeholder="Enter Your First Name" name="room_${roomIndex + 1}_adult_${i + 1}_first_name">
                                <span class="error" id="firstNameError_${roomIndex + 1}_adult_${i + 1}"></span>
                            </div>

                            
                            <div class="col-lg-4">
                                <input type="text" placeholder="Enter Your Last Name" name="room_${roomIndex + 1}_adult_${i + 1}_last_name">
                                <span class="error" id="lastNameError_${roomIndex + 1}_adult_${i + 1}"></span>
                            </div>
                            <input type="hidden" name="room_${roomIndex + 1}_adult_${i + 1}_age" value="0">
                        </div>`;

                    roomElement.appendChild(adultElement);

                }

                for (var j = 0; j < room.NoOfChild; j++) {
                    var childElement = document.createElement('div');
                    childElement.className = 'mt-2';
                    childElement.innerHTML = `
                        <div class="row">
                            <h4 class="name_no">Child ${j + 1}</h4>
                        </div>
                        <div class="d-flex">
                            <div class="col-md-2">
                                <select name="room_${roomIndex + 1}_child_${j + 1}_gender">
                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Miss">Miss</option>
                                </select>
                            </div>
                            <div class="col-md-5">
                                <input type="text" placeholder="Enter Your First Name" name="room_${roomIndex + 1}_child_${j + 1}_first_name">
                                <span class="error" id="cfirstNameError_${roomIndex + 1}_child_${j + 1}"></span>
                            </div>
                            <div class="col-md-5">
                                <input type="text" placeholder="Enter Your Last Name" name="room_${roomIndex + 1}_child_${j + 1}_last_name">
                                <span class="error" id="clastNameError_${roomIndex + 1}_child_${j + 1}"></span>
                            </div>
                            <div class="col-md-0" style="display:none">
                                <input type="hidden" name="room_${roomIndex + 1}_child_${j + 1}_ChildAge" value="${room.ChildAge[j]}">
                            </div>
                        </div>`;

                    roomElement.appendChild(childElement);

                }


                container.appendChild(roomElement);
            });
        }
        generateRoomDetails();
    </script>
    <script>
        document.getElementById('myButton').addEventListener('click', function () {
            if (validateForm()) {
            // Collect adult and child details from the form
        
            var adultChildDetails = [];
            guestData.forEach(function (room, roomIndex) {
                var roomDetails = {
                    adults: [],
                    children: []
                };

                for (var i = 0; i < room.NoOfAdults; i++) {
                    var adultDetails = {
                        gender: document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_gender"]`).value,
                        firstName: document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_first_name"]`).value,
                        lastName: document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_last_name"]`).value,
                        age: document.querySelector(`[name="room_${roomIndex + 1}_adult_${i + 1}_age"]`).value
                    };
                    roomDetails.adults.push(adultDetails);
                }

                for (var j = 0; j < room.NoOfChild; j++) {
                    var childDetails = {
                        gender: document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_gender"]`).value,
                        firstName: document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_first_name"]`).value,
                        lastName: document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_last_name"]`).value,
                        age: document.querySelector(`[name="room_${roomIndex + 1}_child_${j + 1}_ChildAge"]`).value
                    };
                    roomDetails.children.push(childDetails);
                }

                // Add room details to the array
                adultChildDetails.push({
                    ['room' + (roomIndex + 1)]: roomDetails
                });
            });
    

            var jsonString = JSON.stringify(adultChildDetails);
            // Submit the form
            document.querySelector('[name="user_information"]').value = jsonString;
            document.querySelector('form').submit();
        } else {
            return false;
        }
    });
    </script>
    <script>
        const timeoutDuration = 10 * 60 * 1000; // 10 minutes
        let timeoutTimer;

        function updateTimerDisplay(timeRemaining) {
            const minutes = Math.floor(timeRemaining / 60000);
            const seconds = Math.floor((timeRemaining % 60000) / 1000);
            const formattedTime = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            document.getElementById("timer").innerText = `Time remaining: ${formattedTime}`;
        }

        function resetTimer() {
            clearTimeout(timeoutTimer);
            let timeRemaining = timeoutDuration;

            function update() {
                updateTimerDisplay(timeRemaining);
                timeRemaining -= 1000;

                if (timeRemaining < 0) {
                 $("#timeOutBtn").click();
                    updateTimerDisplay(0); 
                    // alert("Your session has timed out. Please try again.");
                    // document.getElementById("paymentForm").reset();
                    // updateTimerDisplay(0); // Display 00:00 after timeout
                } else {
                    timeoutTimer = setTimeout(update, 1000);
                }
            }

            update();
        }
            
        resetTimer();

        
    </script> 
     <script>
        function sendit() {
            if (validateForm()) {
                var currentTime = new Date();
                var currentTimeWithSec = currentTime.toString().slice(4, 24);

                var contime = currentTimeWithSec;

                document.getElementById('curTime').value = contime;

                var form = document.createElement('form');
                form.method = 'POST';
                form.action = '/hotelbooked/';

                // Get values of hidden inputs
                var blockBook = document.querySelector('.block_book').value;
                var hide123Val = document.querySelector('.hide_123_val').value;
                var categoryId = document.querySelector('.category_id').value;

                // Append hidden input fields to the form
                var blockBookField = document.createElement('input');
                blockBookField.type = 'hidden';
                blockBookField.name = 'block_book';
                blockBookField.value = blockBook;
                form.appendChild(blockBookField);

                var hide123ValField = document.createElement('input');
                hide123ValField.type = 'hidden';
                hide123ValField.name = 'hide_123_val';
                hide123ValField.value = hide123Val;
                form.appendChild(hide123ValField);

                var categoryIdField = document.createElement('input');
                categoryIdField.type = 'hidden';
                categoryIdField.name = 'category_id';
                categoryIdField.value = categoryId;
                form.appendChild(categoryIdField);

                // // Add hidden input field for current time with seconds
                // var currentTimeField = document.createElement('input');
                // currentTimeField.type = 'hidden';
                // currentTimeField.name = 'current_time';
                // currentTimeField.value = currentTimeWithSec;
                // form.appendChild(currentTimeField);
                
                // Rest of your existing code
                // ...
                document.body.appendChild(form);
                form.submit();
            }
        }
    </script>
   
</body>
</html>