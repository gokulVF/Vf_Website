{% load static %}
<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="Travelin Responsive HTML Admin Dashboard Template based on Bootstrap 5">
	<meta name="author" content="Travelin">
  <link rel="shortcut icon" type="image/x-icon" href="{% static 'image/home/Magnet logo.png' %}">
  <title>Vacation Feast</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <!-- End fonts -->

	<!-- core:css -->
	<link rel="stylesheet" href="{% static 'vendors/core/core.css' %}">
	<!-- endinject -->

	<!-- Plugin css for this page -->
  <link rel="stylesheet" href="{% static 'vendors/bootstrap-datepicker/bootstrap-datepicker.min.css' %}">
	<!-- End plugin css for this page -->

	<!-- inject:css -->
	<link rel="stylesheet" href="{% static 'fonts/feather-font/css/iconfont.css' %}">
	<!-- endinject -->

  <!-- Layout styles -->  
  <link rel="stylesheet" href="{% static 'css/css/style.css' %}">
  <!-- End layout styles -->

  <link rel="shortcut icon" href="../images/favicon.png" />
  <style>
    textarea{
      resize: none;
    }
@media (min-width: 576px) {
    .modal-dialog {
        max-width: 900px;
        margin: 0 auto;
        top: 50%;
    }
}
  </style>
</head>
<body>
	<div class="main-wrapper">

		<!-- sidebar starts -->
    {% include 'home/aside.html' %}
    <!-- sidebar Ends -->
	
		<div class="page-wrapper">
					
			<!-- navbar Starts -->
			{% include 'home/adminheader.html' %}
			<!-- navbar Ends -->

      <!-- Page Content Starts -->
			<div class="page-content">


                <!-- Add titles -->

				<nav class="page-breadcrumb d-flex align-items-center justify-content-between">
					<ol class="breadcrumb mb-0">
						<li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
						<li class="breadcrumb-item active" aria-current="page">Footer Title</li>
					</ol>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addslider"><i class="link-icon" data-feather="plus"></i> Add </button>
				</nav>
                <div class="search-box p-4 bg-white rounded mb-3 box-shadow">
                    <form class="forms-sample">
                      <div class="row align-items-center">
                        <div class="col-lg-3 mb-3">
                          <h5>Header Lists</h5>
                        </div>
                        <div class="col-lg-12 col-md-4">
                          <form method="GET" action="{% url 'addticket' %}">
                            <div class="input-group">
                                <input type="text" class="form-control" name="search_query" placeholder="Search by  phone number " value="{{ search_query }}">
                                <div class="input-group-append ms-5">
                                    <button class="btn btn-outline-secondary" type="submit">Search</button>
                                </div>
                            </div>
                        </form>
                        </div>
                      </div>
                    </form>
                  </div>

				<div class="row">
					<div class="col-md-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table id="dataTableExample" class="table">
                    <thead>
                      <tr class="text-center">
                        <th>Phone Number</th>
                        <th>Travel Date</th>
                        <th>End Date</th>
                        <!-- <th>To</th> -->
                        <th>File name</th>
                        <!-- <th>Document</th> -->
                        <!-- <th>updated by</th> -->
                        <!-- <th class="text-center">Published</th> -->
                        <th class="text-center">Action</th>
                      </tr>
                    </thead>
                    {% for hotel in hotel_data %}
                    {% if hotel.tickets %}
                    <tbody>
                      <tr class="text-center">
                        <td>{{ hotel.phone_number}}</td>
                        <td>{{ hotel.tickets.traveldate}}</td>
                        <td>{{ hotel.tickets.enddate}}</td>
                        <!-- <td class="w-25">
                          <img src="../images/trending/trending2.jpg" alt="image">
                        </td> -->
                        <!-- <td>{{ hotel.tickets.TO}}</td> -->
                        <td><a href="{% url 'downloadattachment' id=hotel.id type='tickets' %}">{{ hotel.tickets.attachment}}</a></td>
                        <!-- <td><a href="{% url 'downloadattachment' id=hotel.id type='tickets' %}">Download Attachment</a></td> -->
                        <!-- <td class="text-center">
                          <span class="form-check form-switch"><input type="checkbox" class="form-check-input" id="formSwitch1"></span>
                        </td> -->
                        <td class="text-center">
                          <ul class="d-flex list-unstyled mb-0 justify-content-center">
                            <li class="me-2"><a href="" data-bs-toggle="modal" data-bs-target="#addslider-{{hotel.id}}" ><i class="link-icon"  data-feather="edit"></i></a></li>
                            
                            <li>
                              <a href="#" onclick="confirmDelete('{{ hotel.id }}')">
                                  <i class="link-icon" data-feather="delete"></i>
                              </a>
                            </li>
                          
                          <script>
                              function confirmDelete(hotelId) {
                                  if (confirm("Are you sure you want to delete this hotel details?")) {
                                    window.location.href = "{% url 'delete_userpanel' id=0 type='tickets' %}".replace('0', hotelId);
                                  } else {
                                      // Do nothing or handle cancellation
                                  }
                              }
                          </script>
                          </ul>
                        </td>
                      </tr>

                      
                    </tbody>
                  
                    {% endif %}
                    {% endfor %}
                  </table>
                </div>
              </div>
            </div>
					</div>
				</div>
                <div class="row">
                  <div class="dataTables_paginate">
                    <ul class="pagination">
                      {% if hotel_data.has_previous %}
          <li class="paginate_button page-item">
              <a href="?page=1" class="page-link">&laquo; First</a>
          </li>
          <li class="paginate_button page-item">
              <a href="?page={{ hotel_data.previous_page_number }}" class="page-link">Previous</a>
          </li>
      {% endif %}
      
      {% if hotel_data.paginator.num_pages > 0 %}
          {% if hotel_data.number > 2 %}
              {% for page_num in hotel_data.paginator.page_range %}
                  {% if page_num >= hotel_data.number|add:"-1" and page_num <= hotel_data.number|add:"1" %}
                      <li class="paginate_button page-item{% if page_num == hotel_data.number %} active{% endif %}">
                          <a href="?page={{ page_num }}" class="page-link">{{ page_num }}</a>
                      </li>
                  {% endif %}
              {% endfor %}
          {% else %}
              {% for page_num in hotel_data.paginator.page_range|slice:":3" %}
                  <li class="paginate_button page-item{% if page_num == hotel_data.number %} active{% endif %}">
                      <a href="?page={{ page_num }}" class="page-link">{{ page_num }}</a>
                  </li>
              {% endfor %}
          {% endif %}
      {% endif %}
      
      {% if hotel_data.has_next %}
          <li class="paginate_button page-item">
              <a href="?page={{ hotel_data.next_page_number }}" class="page-link">Next</a>
          </li>
          <li class="paginate_button page-item">
              <a href="?page={{ hotel_data.paginator.num_pages }}" class="page-link">Last &raquo;</a>
          </li>
      {% endif %}
      
      
      </div></div>
      <!-- Page Content Ends -->
<!-- footer Starts -->
<footer class="footer d-flex flex-column flex-md-row align-items-center justify-content-between px-4 py-3 border-top small">
  <p class="text-muted mb-1 mb-md-0">Copyright Â© 2022 <a href="../index.html" target="_blank">Vacation Feast</a>.</p>
  <!-- <p class="text-muted">Powered By <i class="mb-1 text-primary ms-1 icon-sm" data-feather="heart"></i> Bizberg Themes</p> -->
</footer>
<!-- footer Ends -->
	
		</div>
	</div>
    <!-- add title -->

  <div class="modal fade" id="addslider" tabindex="-1" aria-labelledby="addslider" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header text-center d-flex justify-content-between">
          <h5 class="modal-title" id="exampleModalLabel">Add Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form class="forms-sample row" id="myForm" action="{% url 'addticket' %}" method="POST" enctype="multipart/form-data">
             {% csrf_token %}
            <div class="mb-3 col-lg-6">
                <label for="subtitle" class="form-label">User Phone Number</label>
                <!-- <textarea name="getsome" id="getsome" cols="50" rows="5"> -->
                <input type="tel" class="form-control" name="Phonenumber" id="Phonenumber" class="Phonenumber" value="" pattern="[0-9]{10}" maxlength="10" placeholder="Phone Number" required>
              </div>
            <div class="mb-3 col-lg-6">
              <label for="Hotel" class="form-label">Filed 1</label>
              <input type="text" class="form-control" id="From" name="From" value="" placeholder="Filed 1">
            </div>
            <!-- <div class="mb-3">
                <label for="exampleFormControlSelect2" class="form-label">TO</label>
                <input type="text" class="form-control" value="" placeholder="end place" name="TO" id="TO" required>
            </div> -->
            <div class="mb-3 col-lg-6">
                <label for="exampleFormControlSelect2" class="form-label">Travel date</label>
                <input type="date" class="form-control" value="" placeholder="Check In" name="checkin" id="checkin" required>
            </div>
            <div class="mb-3 col-lg-6">
                <label for="exampleFormControlSelect2" class="form-label">End Date</label>
                <input type="date" class="form-control" value="" placeholder="Check Out" name="checkout" id="checkout" required>
            </div>
            <div class="mb-3 col-lg-6">
                <label for="exampleFormControlSelect2" class="form-label">Filed 2</label>
                <input type="text" class="form-control" value=""  name="Noofnights" id="Noofnights" required>
            </div>
            <!-- <div class="mb-3">
                <label for="Hotel" class="form-label">YYYYYYYY</label>
                <input type="text" class="form-control" id="Room" name="Room" value="">
            </div> -->
            <div class="mb-3 col-lg-6">
                <label for="upload" class="form-label">Attachment</label><input class="form-control" type="file" id="attachmentfiles" name="attachmentfiles" required>
                
            </div>
            
            <div class="text-center">
              <button type="submit" class="btn btn-primary"><i class="link-icon" data-feather="plus"></i>Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% for hotel in hotel_data %}
  {% if hotel.tickets %}
  <div class="modal fade" id="addslider-{{hotel.id}}" tabindex="-1" aria-labelledby="addslider-{{hotel.id}}" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header text-center d-flex justify-content-between">
          <h5 class="modal-title" id="exampleModalLabel">Edit Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form class="forms-sample row" id="myForm" action="{% url 'editmainticket' id=hotel.id %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
               <div class="mb-3 col-lg-6">
                   <label for="subtitle" class="form-label">User Phone Number</label>
                   <!-- <textarea name="getsome" id="getsome" cols="50" rows="5"> -->
                   <input type="tel" class="form-control" name="Phonenumber" id="Phonenumber" class="Phonenumber" value="{{ hotel.phone_number}}" pattern="[0-9]{10}" maxlength="10" placeholder="Phone Number" required>
                 </div>
               <div class="mb-3 col-lg-6">
                 <label for="Hotel" class="form-label">Filed 1</label>
                 <input type="text" class="form-control" id="From" name="From" value="{{ hotel.tickets.filed1}}" placeholder="Filed 1">
               </div>
               <!-- <div class="mb-3">
                   <label for="exampleFormControlSelect2" class="form-label">TO</label>
                   <input type="text" class="form-control" value="" placeholder="end place" name="TO" id="TO" required>
               </div> -->
               <div class="mb-3 col-lg-6">
                   <label for="exampleFormControlSelect2" class="form-label">Travel date</label>
                   <input type="date" class="form-control" value="{{ hotel.tickets.traveldate}}" placeholder="Check In" name="checkin" id="checkin" required>
               </div>

               <div class="mb-3 col-lg-6">
                   <label for="exampleFormControlSelect2" class="form-label">End Date</label>
                   <input type="date" class="form-control" value="{{ hotel.tickets.enddate}}" placeholder="Check Out" name="checkout" id="checkout" required>
               </div>
               <div class="mb-3 col-lg-6">
                   <label for="exampleFormControlSelect2" class="form-label">Filed 2</label>
                   <input type="text" class="form-control" value="{{ hotel.tickets.filed2}}"  name="Noofnights" id="Noofnights" required>
               </div>
               <!-- <div class="mb-3">
                   <label for="Hotel" class="form-label">YYYYYYYY</label>
                   <input type="text" class="form-control" id="Room" name="Room" value="">
               </div> -->
               <div class="mb-3 col-lg-6">
                   <label for="upload" class="form-label">Attachment</label><input class="form-control" type="file" id="attachmentfiles" name="attachmentfiles">
                   
               </div>
               
               <div class="text-center">
                 <button type="submit" class="btn btn-primary"><i class="link-icon" data-feather="plus"></i>Submit</button>
               </div>
             </form>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}

 

	<!-- core:js -->
  <script src="{% static 'vendors/core/core.js' %}"></script>
  <!-- endinject -->

  <!-- Plugin js for this page -->
  <script src="{% static 'vendors/chartjs/Chart.min.js'  %}"></script>
  <script src="{% static 'vendors/jquery.flot/jquery.flot.js' %}"></script>
  <script src="{% static 'vendors/jquery.flot/jquery.flot.resize.js' %}"></script>
  <script src="{% static 'vendors/bootstrap-datepicker/bootstrap-datepicker.min.js' %}"></script>
  <script src="{% static 'vendors/apexcharts/apexcharts.min.js' %}"></script>
	<!-- End plugin js for this page -->

	<!-- inject:js -->
	<script src="{% static 'vendors/feather-icons/feather.min.js' %}"></script>
	<script src="{% static 'js/admin/template.js' %}"></script>
	<!-- endinject -->

	<!-- Custom js for this page -->
  <script src="{% static 'js/admin/dashboard-light.js' %}"></script>
  <script src="{% static 'js/admin/datepicker.js' %}"></script>
	<!-- End custom js for this page -->


</body>
</html>    