{% load static %}

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zxx">

<head>
<!-- Favicon -->
    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/home/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <!--Custom CSS-->
    <link href="{% static 'css/home/style.css' %}" rel="stylesheet" type="text/css">
    <!--Plugin CSS-->
    <link href="{% static 'css/home/plugin.css' %}" rel="stylesheet" type="text/css">

    <!--Font Awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/home/fonts/line-icons.css' %}" type="text/css">

    <!-- LEAD FORM -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
   <script src="https://unpkg.com/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />
   
</head>
   
    <!-- Form Starts -->
    <div id='lead_formdiv' class='bg-white box-shadow rounded'>
          <!-- Form Titles -->
          <div class="header-content banner-theme" id="formtitle">
            <div class="HeaderSaleLine_saleIcon__pwEFh" >
                <svg xmlns="http://www.w3.org/2000/svg" width="34" height="60" viewBox="0 0 24 38" fill="none"><path d="M24 0H14.5L5 38H14.5L24 0Z" fill="white" fill-opacity="0.5"></path><path d="M12 0H9.95238L0 38H2.04762L12 0Z" fill="white" fill-opacity="0.5"></path></svg>
            </div>
            <div class='zcwf_title text-center activity lead py-1'>
                <h3 class="white f_mhead mb-0" style="font-size: 20px;">
                <svg style="width: 25px;" class="blink me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path fill="#ffffff" d="M432 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM347.7 200.5c1-.4 1.9-.8 2.9-1.2l-16.9 63.5c-5.6 21.1-.1 43.6 14.7 59.7l70.7 77.1 22 88.1c4.3 17.1 21.7 27.6 38.8 23.3s27.6-21.7 23.3-38.8l-23-92.1c-1.9-7.8-5.8-14.9-11.2-20.8l-49.5-54 19.3-65.5 9.6 23c4.4 10.6 12.5 19.3 22.8 24.5l26.7 13.3c15.8 7.9 35 1.5 42.9-14.3s1.5-35-14.3-42.9L505 232.7l-15.3-36.8C472.5 154.8 432.3 128 387.7 128c-22.8 0-45.3 4.8-66.1 14l-8 3.5c-32.9 14.6-58.1 42.4-69.4 76.5l-2.6 7.8c-5.6 16.8 3.5 34.9 20.2 40.5s34.9-3.5 40.5-20.2l2.6-7.8c5.7-17.1 18.3-30.9 34.7-38.2l8-3.5zm-30 135.1l-25 62.4-59.4 59.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L340.3 441c4.6-4.6 8.2-10.1 10.6-16.1l14.5-36.2-40.7-44.4c-2.5-2.7-4.8-5.6-7-8.6zM256 274.1c-7.7-4.4-17.4-1.8-21.9 5.9l-32 55.4L147.7 304c-15.3-8.8-34.9-3.6-43.7 11.7L40 426.6c-8.8 15.3-3.6 34.9 11.7 43.7l55.4 32c15.3 8.8 34.9 3.6 43.7-11.7l64-110.9c1.5-2.6 2.6-5.2 3.3-8L261.9 296c4.4-7.7 1.8-17.4-5.9-21.9z"/></svg>Start Your Adventure Now</h3>
            </div>
        </div>
        <!-- Form Titles -->
        <div class="p-3" id="form_maindiv">
            <form id='leadform' method='POST'>
                <div class=''>
                    <div class='text-start mb-1'>
                        <label class="f_label" for='cus_name'>Name</label>
                        <input type='text' id='cus_name' name='cus_name' maxlength='80'  class=" form-control f_input mb-1" placeholder="Enter Name"></input>
                        <p id="name-error" class="error-msg text-start ps-1 mb-0"></p>
                    </div>
                </div>
                <div class=''>
                    <div class='text-start mb-1'>
                        <label class="f_label" for='cus_mob'>Mobile Number</label>
                        <input type='text' id='cus_mob' name='cus_mob' maxlength='30'  class="form-control f_input mb-1" placeholder="Enter Number"></input>
                        <p id="phone-error" class="error-msg text-start ps-1 mb-0"></p>
                    </div>
                </div>
                <div class='' style="display: none;">
                    <div class='text-start'>
                        <label class="f_label" for='cus_source'>Lead Source</label>
                        <select class='form-control' id='cus_source' name='cus_source'>
                            <option value='-None-'>-None-</option>
                            <option value='BNI'>BNI</option>
                            <option value='Campaign'>Campaign</option>
                            <option value='Existing'>Existing</option>
                            <option value='Facebook'>Facebook</option>
                            <option value='Flyer&#x2f;Promotion'>Flyer&#x2f;Promotion</option>
                            <option  value='Google&#x20;Ads&#x20;Auto'>Google Ads Auto</option>
                            <option value='Google&#x20;AdWords'>Google AdWords</option>
                            <option value='Instagram'>Instagram</option>
                            <option value='Matrimony'>Matrimony</option>
                            <option value='Meta&#x20;Ads&#x20;Auto'>Meta Ads Auto</option>
                            <option value='Others'>Others</option>
                            <option value='Past&#x20;Client&#x2f;Referral'>Past Client&#x2f;Referral</option>
                            <option value='PBC'>PBC</option>
                            <option value='Sulekha&#x20;Leads'>Sulekha Leads</option>
                            <option value='Travel&#x20;Triangle'>Travel Triangle</option>
                            <option value='Trip&#x20;Crafter'>Trip Crafter</option>
                            <option value='Tripoto'>Tripoto</option>
                            <option value='Twitter'>Twitter</option>
                            <option value='Walkin'>Walkin</option>
                            <option selected value='Website'>Website</option>
                            <option  value='Whatsapp'>Whatsapp</option>
                        </select>
                    </div>
                </div>
                <div class=''>
                    <div class=' text-start mb-1'>
                        <label class="f_label" for='des_name'>Destination</label>
                        <textarea class="form-control f_input" id="des_name" name="des_name" rows="2" style="height: 50px;font-family: 'Poppins';" placeholder="Enter Destination"></textarea>
                        <p id="destination-error" class="error-msg text-start ps-1 mb-0"></p>
                    </div>
                </div>
                <div class=''>
                    <div class='text-center'>
                        <button type='button' id='submitbutton2' class='submitbutton2 d-none'></button>
                    </div>
                </div>
            </form>
                <!-- Captcha form -->
                <form id="yourFormId3" class="text-start">
                    <label  class="f_label">ENTER CAPTCHA</label>
                    <div class="d-flex">{{form.captcha}}</div>
                    <span class="error bg-grey error-msg" id="errors"></span>
                    <div class="text-center justify-content-center pb-1">
                        <button type="button" class="btn mt-1 banner-theme white mx-auto rounded w-100 px-5" id="submitonebtn">Book Now</button>
                    </div>
                </form>
           
        </div>
        <!-- Captcha form -->
        <div id="success_div" class="py-5 py-5 px-3 border rounded box-shadow text-center" style="display: none;">
            <img class="w-75 rounded" src="{% static 'image/home/Loadersuc.gif' %}" alt="">
            <h4 class="theme fs-3">Form successfully submitted!</h4>
            <span class="fs-6">Expect a call from our travel experts shortly to help plan your perfect trip.</span>
        </div>
    </div>

<!-- Leadform CRM -->

<!-- Whatsapp script -->
<!-- <script>
    // CAPTCHA FUNCTIONS
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('submitbutton2').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent the default form submission
            var Name = document.getElementById("cus_name").value
            var phone = document.getElementById("cus_mob").value
            var destination = document.getElementById("des_name").value
            var now = document.getElementById("cus_source").value// Get the booking ID from Django template
            var csrftoken = document.cookie.match(/csrftoken=([\w-]+)/)[1];
              if(Name) {
                Name = document.getElementById("").value;
              }
            // Check if the validation passes before making the AJAX call
           
                $.ajax({
                    type: 'POST',
                    url: '/send_whatsapp_lead_message',  // URL to the backend view
                    headers: {
                        'X-CSRFToken': csrftoken
                    },
                    data: {
                            'Name':Name,
                            'destination': destination,
                            'phone':phone,
                            'now':now,
                        },// Adjust this to your form ID
                        success: function(data) {

                                   location.reload();
                        },
                        error: function(xhr, errmsg, err) {
                            console.log(xhr.status + ": " + xhr.responseText);
                            alert('Error sending Lead.'); 
                        }
        });
            
        });
    });
     // VALIDATE FUNCTIONS 
 
</script> -->
<script>
    // CAPTCHA FUNCTIONS
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('submitonebtn').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent the default form submission

            var Name = document.getElementById("cus_name").value
            var phone = document.getElementById("cus_mob").value
            var destination = document.getElementById("des_name").value
            var now = document.getElementById("cus_source").value// Get the booking ID from Django template
            var csrftoken = document.cookie.match(/csrftoken=([\w-]+)/)[1];
            console.log(Name,phone,destination,now)
            // Check if the validation passes before making the AJAX call
            if (Name) {
                document.getElementById("Last_Name").value = Name;
            }
            if (phone) {
                document.getElementById("Mobile").value = phone;
            }
            
            if (destination) {
                document.getElementById("LEADCF23").value = destination;
            }
                           
            if(validate()) {
                $.ajax({
                    type: 'POST',
                    url: '/send_captcha2',  // URL to the backend view
                    headers: {
                        'X-CSRFToken': csrftoken
                    },
                    data: $('#yourFormId3').serialize(), // Adjust this to your form ID
                    success: function(response) {
                       
    
                        if (response.success === true) {
                            // alert("submitted")
                            var clickbtn = document.getElementById('formsubmit');
                            
                             document.getElementById("form_maindiv").style.display = "none";
                             document.getElementById("success_div").style.display="block";
                             
                              setTimeout(function() {
                                // Submit the form associated with the element stored in the variable 'clickbtn'
                                //  $("#submitbutton2").click()
                                clickbtn.form.submit();
                                console.log('submitted')
                            }, 1000);
                        } else {
                            console.log(response.message);
                            var otperror = document.getElementById('errors');
    
                            otperror.innerText = response.message;
                        }
                    },
                    error: function(xhr, errmsg, err) {
                        // Handle error
                        console.log(xhr.status + ": " + xhr.responseText);
                    }
                });
            } else {
                console.log("Validation Failed")
            }
            
        });
    });
     
</script>

<script>
 
    function validate() {
        // Perform form validation
        var name = document.getElementById("cus_name").value;
        var phone = document.getElementById("cus_mob").value;
        var destination = document.getElementById("des_name").value;
    
        var nameRegex = /^[a-zA-Z\s]+$/;
        var phoneRegex = /^[0-9]{10}$/;
    
        var isValid = true;
    
        if (!nameRegex.test(name)) {
            document.getElementById("name-error").innerHTML = "Please enter a valid name.";
            isValid = false;
        } else {
            document.getElementById("name-error").innerHTML = "";
        }
    
        if (!phoneRegex.test(phone)) {
            document.getElementById("phone-error").innerHTML = "Please enter a valid 10-digit whatsapp number.";
            isValid = false;
        } else {
            document.getElementById("phone-error").innerHTML = "";
        }
    
        if (destination.trim() === "") { // Check if destination is empty after trimming whitespace
            document.getElementById("destination-error").innerHTML = "Please enter a message.";
            isValid = false;
        } else {
            document.getElementById("destination-error").innerHTML = "";
        }
    
        return isValid; // Ensure the function returns the validation status
    }
</script>

<!-- LEAD FORM SCRIPTS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- script end -->

<!-- CSS -->
<style>
      .banner-theme {
        background: linear-gradient(240deg, #076cd0, #029e9d) !important;
        border-radius: 6px 6px 0px 0px;
     }

     .f_label {
        text-transform: uppercase;
        font-size: 13px;
        color: #029e9d;
        font-weight: 500;
        letter-spacing: 1px;
     }

     .f_input {
        border: 1px solid #777 !important;
        border-radius: 4px !important;
        font-size: 14px !important;
     }

     #crmWebToEntityForm {
        border: 1px solid #029e9d;
     }

     .form-control:focus {
        border-color: #029e9d !important;
        box-shadow: 0 0 0 0.2rem rgb(143, 194, 194) !important;
    } 
     
    .error-msg {
         color: red;
         font-size: 10px;
     }

     #id_captcha_1 {
             margin-left: 6px;
            border-radius: 4px;
     }
     .lead_formdiv {
        border: 1px solid #029e9d;
     }

       /*BLINK CSS-------------------*/
       .activity {
            display: flex;
            flex-direction: row; 
            justify-content: center;
            align-items: center;
            margin-bottom: 0 !important;
            }

    .blink {
        color : red;
        margin-right: 0.5rem;
          animation: blink 2s steps(5, start) infinite;
          -webkit-animation: blink 1s steps(5, start) infinite;
        }
        @keyframes blink {
          to {
            visibility: hidden;
          }
        }
        @-webkit-keyframes blink {
          to {
            visibility: hidden;
          }
        }
        .noblink {
          margin-right: 0.5rem;
     }
    /*BLINK CSS-------------------*/
</style>



  
    <!-- *Scripts* -->
    <script src="{% static 'js/home/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/home/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/home/particles.js' %}"></script>
    <script src="{% static 'js/home/particlerun.js' %}"></script>
    <script src="{% static 'js/home/plugin.js' %}"></script>
    <script src="{% static 'js/home/main.js' %}"></script>
    <script src="{% static 'js/home/custom-accordian.js' %}"></script>
    <script src="{% static 'js/home/custom-nav.js' %}"></script>
    <script src="{% static 'js/home/custom-navscroll.js' %}"></script>
</body>
</html>